
index_reference = {
   exec "bwa index $REFERENCE"
   forward input
}

align = {
   exec "bwa mem -t $THREADS $REFERENCE $input > $output.sam"
}

sort = {
   exec "samtools view -bS $input | samtools sort -@ $THREADS - $output.bam.prefix"
}

entrypoint = segment {
   index_reference + align + sort
}
